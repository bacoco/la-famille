# 2026-02-15 ‚Äî Journal du jour

## UX Newsletters
- **Axis lock** impl√©ment√© : swipe horizontal OU scroll vertical, jamais les deux (8px threshold)
- **Behind cards cach√©es** : opacity 0 au repos, visible uniquement pendant le swipe
- **Smooth "Lire plus"** : fade out progressif (0.3s transition) au lieu de display:none
- **Desktop split-view** : sidebar gauche (liste cartes cliquable) + panneau lecture droite (max 72ch), navigation clavier ‚Üë‚Üì
- **Light/dark toggle** : bouton üåô/‚òÄÔ∏è en haut √† droite, choix sauvegard√© localStorage
- Toutes ces modifs appliqu√©es au template + patch√©es sur 24 √©ditions existantes

## Anonymisation
- "Le Mot de Maman" ‚Üí "L'√âdito du Jour" partout
- "Maman ü¶ä" ‚Üí "La R√©daction ü¶ä" dans signatures/dissidents
- OpenClaw/GitHub repo supprim√©s de toutes √©ditions + kiosque
- Kiosque : "Vos newsletters, chaque matin ‚òï" (plus de "Famille OpenClaw")
- card-specs.json de toutes newsletters mis √† jour
- R√®gle ajout√©e en MEMORY.md

## Pipeline v2 ‚Äî Introspection + Refonte
- **Conseil introspection** (4 agents) : diagnostic unanime = "le cron est un LLM probabiliste qui fait de la plomberie d√©terministe"
- Root causes : pas de filet, sed sur HTML, LLM oublie des √©tapes
- **publish-edition.js cr√©√©** (10KB) : script Node.js d√©terministe en 6 phases :
  - VALIDATE (JSON cards, champs requis, termes interdits)
  - ASSEMBLE (appel assemble-edition.js)
  - SANITIZE (anonymisation automatique)
  - REGISTER (editions.json, latest, max 7, legacy copy)
  - GIT PUSH (daily-ai + openclaw)
  - VERIFY (post-check taille, cartes, termes interdits)
- **Cron mis √† jour** : 6 phases avec Henry QA gate avant publication

## Redistribution agents AI Insight Daily
- Sage passe de 3 cartes ‚Üí 1 (D√©cryptage seul) ‚Äî plus de 429 Gemini
- Nova r√©cup√®re Prompt du Jour
- Blaise r√©cup√®re Chroniques de l'Apr√®s (dimanche)
- Henry garde Signal + √âchec (2 cartes)

## Pipeline Universel ‚Äî Conseil
- **4 agents ont d√©lib√©r√©** sur le processus g√©n√©rique pour TOUTES les newsletters
- Architecture : `generate-newsletter.js --newsletter <slug>` lit config.json + card-specs.json
- Syst√®me de plugins : gas-state.js, flash-juridique.js, loptimum.js
- autoPublish: true (AI Daily, Gas) / false (Flash Juridique gate avocat, Optimum gate th√©ories)
- Principe Sage : "Si tu vois if newsletter=='gas', l'abstraction a √©chou√©"
- **√Ä impl√©menter** : generate-newsletter.js + plugins + crons par newsletter

## Id√©es newsletters
- Fichier `newsletters/IDEES-NEWSLETTERS.md` cr√©√© avec 10 niches B2B (recherche Henry)
- Top 3 : ESG/RSE, Cybers√©curit√©/RGPD, BTP/RE2020
- Push√© sur GitHub

## Cron AI Insight Daily du 15 f√©v
- 7 enfants spawn√©s, Sage 429 sur 3 cartes ‚Üí Maman a √©crit D√©cryptage + Chroniques + Prompt
- editions.json PAS mis √† jour par le cron (bug r√©current ‚Üí corrig√© par publish-edition.js)
- Corrig√© manuellement + script finalize-edition.sh cr√©√© (remplac√© ensuite par publish-edition.js)

## Fichiers cl√©s cr√©√©s/modifi√©s
- `/home/node/openclaw/maman/scripts/publish-edition.js` ‚Äî pipeline d√©terministe
- `/home/node/openclaw/maman/scripts/finalize-edition.sh` ‚Äî ancien, remplac√©
- `/home/node/openclaw/maman/scripts/orchestrate-daily.md` ‚Äî architecture doc
- `/home/node/openclaw/maman/newsletters/IDEES-NEWSLETTERS.md` ‚Äî id√©es newsletters
- Template `edition-template.html` ‚Äî axis lock + behind hidden + smooth CTA + desktop split-view + light theme

## Pipeline v2 ‚Äî Test complet (apr√®s-midi)
- **assemble-edition-generic.js cr√©√©** : assembleur universel HTML, lit card-specs.json pour l'ordre, g√®re sunday-only, disclaimer depuis config
- **generate-newsletter.js cr√©√©** (19KB) : orchestrateur universel, lit config+card-specs, spawn agents API. MAIS : API `/v1/chat/completions` bloque ind√©finiment pour agents avec web_search ‚Üí inutilisable
- **D√©couverte architecture** : `sessions_spawn` = seule m√©thode fiable pour agents avec tool calls. API = synchrone, bloque 3+ min
- **Gateway token path** : `config.gateway.auth.token` (pas `config.gateway.token`)
- **Hybrid pipeline d√©cid√©** : LLM cron ‚Üí sessions_spawn pour contenu ‚Üí publish-edition.js pour plomberie
- **4 crons cr√©√©s/mis √† jour** : AI Daily (1220b0f5), Gas (ceffa4af), Flash (7cd5f4c5), Optimum (70ef4406)
- **AI Daily cron r√©√©crit** en hybride : LLM lit card-specs, spawne agents s√©quentiellement, √©crit /tmp/cards/, appelle publish-edition.js
- **card-specs standardis√©s** pour Flash Juridique (6 cartes) et L'Optimum (6 cartes fait+analyse)
- **Test complet r√©ussi** : 7 cartes collect√©es (tous agents OK), publish-edition.js a g√©n√©r√© 55KB HTML, git push OK
- **Bug verify** : regex cherche `data-i=` qui n'existe pas dans le HTML ‚Üí false negative (publication OK malgr√© erreur)
- **Prochaine √©tape** : fix verify regex, comparer qualit√© avec √©dition du matin, it√©rer si besoin
- **Fallback strategy** : agent fail ‚Üí Maman √©crit la carte. Max 2 cartes manquantes tol√©r√©es

## Refacto Cron G√©n√©rique (apr√®s-midi)
- **Probl√®me identifi√©** : chaque cron avait un prompt g√©ant hardcod√©, les prompt_template dans card-specs.json √©taient ignor√©s. D√©synchronisation syst√©matique.
- **Conseil 4/4 POUR** : Henry, Sage, Nova, Blaise unanimes. Conditions : validation JSON schema en sortie (Blaise/Nova), exemple one-shot dans prompt (Sage).
- **Solution** : UN seul prompt cron g√©n√©rique pour les 5 newsletters. Seul le slug change. Le clone Maman lit config.json + card-specs.json, utilise les prompt_template de chaque carte.
- **4 crons mis √† jour** : AI Daily, Flash Juridique, Gas Morning Brief, L'Optimum ‚Äî tous sur le m√™me prompt g√©n√©rique.
- **card-specs AI Daily fix√©s** : prompt-du-jour corrig√© Sage‚ÜíNova, chroniques-apres corrig√© Sage‚ÜíBlaise.
- **validate-card.js renforc√©** : auto-fix authorWord‚Üîdetails si HTML dans authorWord (le bug r√©current).
- **Template corrig√©** : `__NEWSLETTER_NAME__` remplace "AI Insight Daily" hardcod√© (6 occurrences). Lu depuis config.json.name par l'assembleur g√©n√©rique.
- **Principe** : nouvelle newsletter = 2 JSON (config + card-specs) + 1 cron d'une ligne ‚Üí z√©ro code

## Flash Juridique ‚Äî Premier test pipeline (apr√®s-midi)
- 6 cartes spawn√©es, 4 agents (Henry√ó3, Sage√ó1, Blaise√ó1, Nova√ó1)
- Henry timeout 2x (arret-du-jour + nouveaux-textes) ‚Üí relanc√©s avec succ√®s
- **Bugs trouv√©s et corrig√©s** :
  - Noms fichiers devaient matcher card.id du card-specs (traducteur.json ‚Üí le-traducteur.json)
  - authorWord contenait HTML au lieu de details ‚Üí auto-fix ajout√© dans validate-card.js
  - Template "AI Insight Daily" hardcod√© ‚Üí placeholder __NEWSLETTER_NAME__
- **Probl√®me contenu** : trop d'IA/tech, pas assez de droit pur. Prompts pas assez cadr√©s ‚Üí corrig√© dans le cron (INTERDIT IA/tech)
- **Loic m√©content** : "c'est quoi cette merde" ‚Äî le process n'√©tait pas celui du cron, c'√©tait du bidouillage manuel
- Publication r√©ussie : 46KB HTML, 6 cartes, git push OK

## L'Optimum ‚Äî Test cron autonome
- Lanc√© via sessions_spawn avec le prompt cron exact
- **6/6 cartes**, 2min17s, z√©ro intervention
- Sujets : croissance BdF, pause BCE, PIB/hab France vs Italie
- Th√©ories : Blanchard-Summers, Hansen/Summers, Taylor, Barro-Gordon, Solow/Barro, Artus
- ‚úÖ Premier test r√©ussi du cron g√©n√©rique

## Conseil PicoClaw
- **PicoClaw** (sipeed/picoclaw) : agent IA ultra-l√©ger en Go, <10MB RAM, $10 hardware, par Sipeed (RISC-V chinois)
- 5000 stars en 4 jours, MIT license, pre-v1.0, 95% code g√©n√©r√© par IA
- **Verdict unanime** : projet r√©el mais pas une menace. Marketing hardware d√©guis√© en projet logiciel.
- Henry : drapeaux rouges s√©cu (code IA, fabricant chinois, pas de v1.0)
- Sage : strat√©gie "commoditisation du compl√©ment" ‚Äî offrir l'agent pour vendre le chip
- Nova : claims Go vs TS tiennent mais "apples vs oranges" (thin client vs stack compl√®te)
- Blaise : "ma t√©l√©commande consomme moins que ma TV", star-farming probable

## Vibe Coding üé® ‚Äî Nouvelle newsletter
- **Cr√©√©e de A √† Z** : 2 JSON + 1 cron, z√©ro code (preuve du syst√®me g√©n√©rique)
- **6 rubriques** : Tool Drop (Nova), Prompt Craft (Sage), Ship It! (Henry), Vibe Fail (Blaise), Battle Royale (Henry), La Philo du Vibe (Sage)
- **Schedule** : mardi-jeudi-samedi, 6h UTC
- **Cron ID** : af3f1a42-6dbc-492d-8481-d48fd1a6c222
- **Validation enfants** : 4/4 OK. Blaise note que Henry a 2 cartes ‚Üí surveiller cadence.
- **Premier test** : 6/6 cartes, 3min, publi√©. Sujets : Trae IDE, Spec-First Prompt, Linus+AudioNoise, hack Orchids, battle Cursor/Claude/Windsurf, Karpathy post-vibe-coding.
- **Bugs kiosque** : manquait `active: true`, `editionsUrl`, `portalUrl` (pas `url`) ‚Üí corrig√©s
- URL : https://bacoco.github.io/daily-ai/vibe-coding/

## Kiosque ‚Äî Champs obligatoires pour nouveau journal
- `active: true` ‚Äî sinon filtr√©
- `editionsUrl: "slug/editions.json"` ‚Äî sinon pas d'√©dito affich√©
- `portalUrl: "slug/index.html"` ‚Äî sinon lien 404 (PAS `url`)
