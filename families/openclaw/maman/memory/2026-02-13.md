# 2026-02-13 â€” Session Maman

## Bugs corrigÃ©s Ã©ditions
- **Portal index.html** : clic Ã©dito ne marchait pas â†’ remplacÃ© JS handler par `<a>` natif
- **Scroll resize titre** : supprimÃ© le `.card.scrolled` qui shrinkait titre/badge au scroll (Loic veut taille fixe)
- **editions.json** : le 12 Ã©tait en dernier au lieu d'en premier â†’ fixÃ©, newest first obligatoire
- **Edition 13 cassÃ©e** : le template build shell a produit du CSS minifiÃ© diffÃ©rent â†’ les regex sed ont dÃ©truit le fichier (13K au lieu de 36K). RestaurÃ© depuis git, reconstruit en copiant le HTML du 12 + donnÃ©es du 13
- **Dissidents HTML brut** : les enfants utilisent `<h3>âš¡ AVIS DISSIDENT</h3>` au lieu de `<div class='dissent'>` â†’ fixÃ© manuellement + validateur crÃ©Ã©
- **authorWord dÃ©bile** : Sage a mis "DÃ‰CRYPTAGE" comme authorWord â†’ validateur dÃ©tecte maintenant
- **Edition 14 cassÃ©e** : tout le contenu dans `authorWord` au lieu de `details`, details vide â†’ cron n'a PAS utilisÃ© le validateur/assembleur

## Pipeline Newsletter finalisÃ©
- **Template fixe** : `templates/edition-template.html` â€” HTML/CSS/JS avec placeholders `__DATA_PLACEHOLDER__`, `__DATE__`, `__DATEKEY__`
- **Validateur** : `templates/validate-card.js` â€” vÃ©rifie et corrige :
  - Badges sans emoji â†’ ajout auto
  - Dissidents HTML brut â†’ conversion CSS classes auto
  - authorWord avec HTML â†’ erreur bloquante
  - authorWord > 300 chars â†’ erreur bloquante
  - details vide â†’ erreur bloquante
  - Self-dissent (mÃªme auteur) â†’ warning
  - Liens < 2 â†’ warning
  - authorWord gÃ©nÃ©rique/lazy â†’ warning
- **Assembleur** : `templates/assemble-edition.js` â€” prend cards JSON + template fixe â†’ HTML final
  - Usage : `node assemble-edition.js --date "DD Mois YYYY" --edito "texte" --cards dir/ --out file.html`
- **CARD-RULES.md** : rÃ¨gles qualitÃ© documentÃ©es
- **Cron mis Ã  jour** : Ã©tapes validation + assembleur + browser check Playwright obligatoire

## Ã‰ditions spÃ©ciales crÃ©Ã©es
- **Lea News** : `lea-news-2026-02-13.html` â€” BCE & Fed, politique monÃ©taire (type:special)
- **Trending Now** : `trending-2026-02-13.html` â€” 6 sujets les plus viraux du jour (type:special)
  - Dissident retirÃ© sur article fusillade SC State (inappropriÃ©)
- editions.json : dailies en premier, spÃ©ciales aprÃ¨s

## LeÃ§ons critiques
- **JAMAIS toucher aux Ã©ditions HTML prÃ©cÃ©dentes** â€” ne modifier QUE l'Ã©dition du jour
- **JAMAIS recrÃ©er le CSS/JS** â€” utiliser le template fixe
- **Les regex sed sur du HTML = danger mortel** â€” a dÃ©truit le fichier du 13
- **Toujours vÃ©rifier avec browser Playwright** avant de dire "c'est bon"
- Le cron isolÃ© ne suit pas forcÃ©ment les instructions â†’ il faut des scripts dÃ©terministes (validateur + assembleur) pas juste des prompts
- Les enfants mettent le contenu dans le mauvais champ si pas cadrÃ© â†’ format JSON strict avec exemples dans le prompt

## Format carte JSON enfant (rÃ©fÃ©rence)
```json
{
  "t": "alert|analysis|tech|strategy",
  "badge": "ğŸ”´ Signal",
  "title": "max 80 chars",
  "hook": "texte pur, 2-3 phrases",
  "authorWord": "texte pur SANS HTML, max 200 chars, opinion tranchÃ©e",
  "author": "Henry ğŸ¦‰",
  "details": "TOUT le HTML article + dissident <div class='dissent'>",
  "sig": "Henry ğŸ¦‰"
}
```
